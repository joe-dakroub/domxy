<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Domxy Example</title>
    <script type="module">
      import { domxy } from "/domxy.js";
      import "https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.19.1/cdn/components/button/button.js";

      const {
        button,
        code,
        div,
        fieldset,
        form,
        h1,
        h2,
        h3,
        hr,
        input,
        label,
        legend,
        li,
        main,
        p,
        pre,
        span,
        ul,
        SlButton
      } = domxy;

      const app = main(
        h1({ class: "title", id: "title" }, "Domxy Example"),
        pre(
          code(
            `import { domxy } from "/domxy.js";
import "https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.19.1/cdn/components/button/button.js";

const { button, code, div, fieldset, form, h1, h2, h3, hr, input, label, legend, li, main, p, pre, ul, SlButton } = domxy;

const example = form({ dataset: { controller: "hello" } },
  div(
    label({ for: "name" }, "Name"),
    input({
      dataset: {
        helloTarget: "name"
      },
      id: "name",
      name: "name",
      placeholder: "enter a name",
      type: "text"
    }),
  ),
  SlButton({ dataset: { action: "click->hello#greet" } }, "Submit"),
)

document.body.appendChild(example);`,
          ),
        ),
        h3("Rendered HTML"),
        pre(
          code(
            `
<form action="#" data-controller="hello" method="post" data-type="form">
  <div>
    <label for="name">Name</label>
    <input data-hello-target="name" id="name" name="name" placeholder="enter a name" type="text">
  </div>
  <sl-button data-action="click->hello#greet">Submit</sl-button>
</form>
`,
          ),
        ),
        h3("Rendered Output"),
        form(
          {
            action: "#",
            dataset: { controller: "hello" },
            method: "post",
          },
          div({ class: "form-group" },
            label({ for: "name" }, "Name"),
            input({
              dataset: {
                helloTarget: "name"
              },
              id: "name",
              name: "name",
              placeholder: "enter a name",
              type: "text",
            }),
          ),
          span({
            aria: {
              labelledby: "tac",
            },
            ariaChecked: false,
            role: "checkbox",
            tabindex: 0
          }),
          span({ id: "tac" }, "I agree to the Terms and Conditions."),
          SlButton({ dataset: { action: "click->hello#greet" } }, "Submit"),
        ),
      );

      document.body.appendChild(app);

      // Test creating a div with dataset attributes
      const divElement = div({
        dataset: { controller: "hello" },
        class: "form-group"
      });
      console.assert(divElement.tagName === 'DIV', 'Expected tag name to be DIV');
      console.assert(divElement.dataset.controller === 'hello', 'Expected dataset controller to be hello');
      console.assert(divElement.className === 'form-group', 'Expected class to be form-group');

      // Test creating an input with dataset attributes
      const inputElement = input({
        dataset: { helloTarget: "name" },
        id: "name",
        name: "name",
        placeholder: "enter a name",
        type: "text"
      });
      console.assert(inputElement.tagName === 'INPUT', 'Expected tag name to be INPUT');
      console.assert(inputElement.dataset.helloTarget === 'name', 'Expected dataset helloTarget to be name');
      console.assert(inputElement.id === 'name', 'Expected id to be name');
      console.assert(inputElement.name === 'name', 'Expected name to be name');
      console.assert(inputElement.placeholder === 'enter a name', 'Expected placeholder to be enter a name');
      console.assert(inputElement.type === 'text', 'Expected type to be text');

      // Test creating a span with aria attributes
      const spanElement = span({
        aria: { labelledby: "tac" },
        ariaChecked: false,
        role: "checkbox",
        tabindex: 0
      });
      console.assert(spanElement.tagName === 'SPAN', 'Expected tag name to be SPAN');
      console.assert(spanElement.getAttribute('aria-labelledby') === 'tac', 'Expected aria-labelledby to be tac');
      console.assert(spanElement.getAttribute('aria-checked') === 'false', 'Expected aria-checked to be false');
      console.assert(spanElement.getAttribute('role') === 'checkbox', 'Expected role to be checkbox');
      console.assert(spanElement.tabIndex === 0, 'Expected tabindex to be 0');

      // Test creating a span with id
      const spanWithIdElement = span({ id: "tac" }, "I agree to the Terms and Conditions.");
      console.assert(spanWithIdElement.tagName === 'SPAN', 'Expected tag name to be SPAN');
      console.assert(spanWithIdElement.id === 'tac', 'Expected id to be tac');
      console.assert(spanWithIdElement.textContent === 'I agree to the Terms and Conditions.', 'Expected text content to be I agree to the Terms and Conditions.');

      // Test creating a custom element
      const customElement = SlButton({ dataset: { action: "click->hello#greet" } }, "Submit");
      console.assert(customElement.tagName === 'SL-BUTTON', 'Expected tag name to be SL-BUTTON');
      console.assert(customElement.dataset.action === 'click->hello#greet', 'Expected dataset action to be click->hello#greet');
      console.assert(customElement.textContent === 'Submit', 'Expected text content to be Submit');

      console.log("All tests passed!");
    </script>
  </head>
  <body></body>
</html>
